<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Dashboard - AI Tutor</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <style>
        body {
            min-height: max(884px, 100dvh);
            background: var(--background-light);
        }

        .page-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: white;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem;
            padding-bottom: 0.5rem;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .greeting {
            display: flex;
            flex-direction: column;
        }

        .greeting-text {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .user-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .settings-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .settings-btn:hover {
            background: var(--background-light);
        }

        .user-avatar-small {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: var(--primary-50);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .user-avatar-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-avatar-small .material-symbols-outlined {
            font-size: 1.5rem;
            color: var(--primary);
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 6rem;
        }

        .profile-card {
            margin: 1rem 1.5rem;
            padding: 1.25rem;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .profile-top {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .avatar-wrapper {
            position: relative;
        }

        .avatar {
            width: 5rem;
            height: 5rem;
            border-radius: 50%;
            background: var(--background-light);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .avatar-icon {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            background: var(--primary-50);
            color: var(--primary);
        }

        .avatar-badge {
            position: absolute;
            bottom: -0.25rem;
            right: -0.25rem;
            width: 1.75rem;
            height: 1.75rem;
            background: #22c55e;
            border-radius: 50%;
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .profile-info {
            flex: 1;
            min-width: 0;
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .child-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .level-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.625rem;
            background: var(--primary-50);
            color: var(--primary);
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .child-details {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .interests-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .interest-tag {
            padding: 0.25rem 0.5rem;
            background: var(--background-light);
            color: var(--text-secondary);
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .readiness-section {
            margin-top: 1.5rem;
        }

        .readiness-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 0.5rem;
        }

        .readiness-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .readiness-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .readiness-bar {
            width: 100%;
            height: 0.5rem;
            background: var(--background-light);
            border-radius: 999px;
            overflow: hidden;
        }

        .readiness-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 999px;
            transition: width 0.5s ease;
        }

        .readiness-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            text-align: right;
        }

        .section {
            padding: 0 1.5rem 1rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .view-all {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--primary);
            cursor: pointer;
        }

        .view-all:hover {
            text-decoration: underline;
        }

        .topics-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .topic-card {
            position: relative;
            padding: 1rem;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .topic-card:hover {
            box-shadow: var(--shadow-md);
        }

        .topic-card:active {
            transform: scale(0.98);
        }

        .topic-card.completed {
            opacity: 0.9;
        }

        .topic-card.in-progress {
            box-shadow: var(--shadow-md);
            border-left: 4px solid var(--primary);
        }

        .topic-card.locked {
            opacity: 0.7;
            pointer-events: none;
        }

        .topic-icon-wrapper {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        .topic-icon {
            width: 3rem;
            height: 3rem;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .topic-card.completed .topic-icon {
            background: #dcfce7;
            color: #16a34a;
        }

        .topic-card.in-progress .topic-icon {
            background: var(--primary-50);
            color: var(--primary);
        }

        .topic-card:not(.completed):not(.in-progress) .topic-icon {
            background: var(--background-light);
            color: var(--text-muted);
        }

        .topic-content {
            display: flex;
            gap: 1rem;
        }

        .topic-icon-small {
            width: 3rem;
            height: 3rem;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .topic-card.completed .topic-icon-small {
            background: #dcfce7;
            color: #16a34a;
        }

        .topic-card.in-progress .topic-icon-small {
            background: var(--primary-50);
            color: var(--primary);
        }

        .topic-card:not(.completed):not(.in-progress) .topic-icon-small {
            background: var(--background-light);
            color: var(--text-muted);
        }

        .topic-info {
            flex: 1;
        }

        .topic-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .topic-description {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }

        .topic-status {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            margin-top: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .topic-card.completed .topic-status {
            background: #dcfce7;
            color: #16a34a;
        }

        .topic-card.in-progress .topic-status {
            background: var(--primary-50);
            color: var(--primary);
        }

        .topic-card:not(.completed):not(.in-progress) .topic-status {
            background: var(--background-light);
            color: var(--text-secondary);
        }

        .topic-progress {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .progress-dots {
            display: flex;
            gap: 0.25rem;
        }

        .progress-dot {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: var(--background-light);
            border: 2px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.625rem;
            font-weight: 600;
            color: var(--text-muted);
        }

        .progress-dot.active {
            background: var(--primary);
            color: white;
        }

        .progress-dot.completed {
            background: #22c55e;
            color: white;
            border-color: #22c55e;
        }

        .continue-btn {
            margin-left: auto;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: white;
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .continue-btn:hover {
            background: #1a82d9;
        }

        .locked-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(1px);
            border-radius: var(--radius-xl);
        }

        .locked-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 1rem;
            background: white;
            border-radius: 999px;
            box-shadow: var(--shadow-lg);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .locked-badge .material-symbols-outlined {
            color: #f59e0b;
            font-size: 1rem;
        }

        .tip-section {
            padding: 0.5rem 1.5rem 1.5rem;
        }

        .tip-card {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: #fef3c7;
            border-radius: var(--radius-lg);
            border: 1px solid #fde68a;
        }

        .tip-card .material-symbols-outlined {
            color: #f59e0b;
            flex-shrink: 0;
        }

        .tip-content {
            flex: 1;
        }

        .tip-label {
            font-size: 0.75rem;
            font-weight: 700;
            color: #b45309;
            text-transform: uppercase;
            margin-bottom: 0.25rem;
        }

        .tip-text {
            font-size: 0.875rem;
            color: #92400e;
            line-height: 1.4;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 480px;
            background: white;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            padding: 0.75rem 0;
            padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem;
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.625rem;
            font-weight: 500;
            transition: color 0.2s ease;
            cursor: pointer;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item .material-symbols-outlined {
            font-size: 1.5rem;
        }

        .nav-item.filled .material-symbols-outlined {
            font-variation-settings: 'FILL' 1;
        }

        .nav-center {
            position: relative;
            margin-top: -1.5rem;
        }

        .nav-center-btn {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, #1a82d9 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(30, 148, 246, 0.3);
            transition: transform 0.2s ease;
        }

        .nav-center-btn:hover {
            transform: scale(1.05);
        }

        .nav-center-btn .material-symbols-outlined {
            font-size: 1.5rem;
        }

        @supports (padding: max(0px)) {
            .bottom-nav {
                padding-bottom: calc(max(0.75rem, env(safe-area-inset-bottom)) + 0.5rem);
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- Header -->
        <header class="header">
            <div class="greeting">
                <span class="greeting-text">Good Morning,</span>
                <h1 class="user-name">{{ session.get('child_name', 'Parent') }}</h1>
            </div>
            <div class="header-actions" style="display: flex; gap: 0.5rem; align-items: center;">
                <a href="{{ url_for('logout') }}" class="settings-btn" title="Logout">
                    <span class="material-symbols-outlined">logout</span>
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Child Profile Summary Card -->
            <div class="profile-card">
                <div class="profile-top">
                    <div class="avatar-wrapper">
                        <div class="avatar">
                            <div class="avatar-icon">ğŸ‘§</div>
                        </div>
                        <div class="avatar-badge">
                            <span class="material-symbols-outlined" style="font-size: 0.875rem;">star</span>
                        </div>
                    </div>
                    <div class="profile-info">
                        <div class="profile-header">
                            <h2 class="child-name">Jamie Li</h2>
                            <span class="level-badge">Primary 1 Prep</span>
                        </div>
                        <p class="child-details">Age 5 â€¢ Hong Kong</p>
                        <div class="interests-tags">
                            <span class="interest-tag">æé¾</span>
                            <span class="interest-tag">ç•«ç•«</span>
                        </div>
                    </div>
                </div>
                <div class="readiness-section">
                    <div class="readiness-header">
                        <span class="readiness-label">Overall Readiness</span>
                        <span class="readiness-value">20%</span>
                    </div>
                    <div class="readiness-bar">
                        <div class="readiness-fill" style="width: 20%;"></div>
                    </div>
                    <p class="readiness-hint">Target: St. Paul's Co-ed (Interview in 3 mos)</p>
                </div>
            </div>

            <!-- Learning Progress Stats -->
            <div class="profile-card" style="margin: 1rem 1.5rem;">
                <h4 style="margin: 0 0 1rem; font-size: 1rem; font-weight: 600; color: var(--text-primary);">ğŸ“Š å­¸ç¿’é€²åº¦</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
                    <div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">1</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">å·²å®Œæˆ</div>
                    </div>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">1</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">é€²è¡Œä¸­</div>
                    </div>
                    <div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--text-secondary);">7</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">æœªé–‹å§‹</div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span style="font-size: 0.875rem; color: var(--text-secondary);">ç¸½é€²åº¦</span>
                        <span style="font-size: 0.875rem; font-weight: 600; color: var(--primary);">11%</span>
                    </div>
                    <div style="height: 8px; background: var(--background-light); border-radius: 4px; overflow: hidden;">
                        <div style="width: 11%; height: 100%; background: linear-gradient(90deg, var(--primary), #8b5cf6); border-radius: 4px; transition: width 0.3s ease;"></div>
                    </div>
                </div>
            </div>

            <!-- Learning Streak Display -->
            <div class="profile-card" style="margin: 1rem 1.5rem; background: linear-gradient(135deg, #ff9a44 0%, #fc6076 100%); color: white;">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <h4 style="margin: 0; font-size: 1rem; font-weight: 600;">ğŸ”¥ é€£çºŒç·´ç¿’</h4>
                        <p style="margin: 0.5rem 0 0; font-size: 0.75rem; opacity: 0.9;">ä¿æŒæ¯æ—¥ç·´ç¿’ï¼ŒåŸ¹é¤Šå¥½ç¿’æ…£ï¼</p>
                    </div>
                    <div style="text-align: center;">
                        <div id="streak-count" style="font-size: 2.5rem; font-weight: 700; line-height: 1;">3</div>
                        <div style="font-size: 0.75rem; opacity: 0.9;">å¤©</div>
                    </div>
                </div>
                <div style="margin-top: 0.75rem; display: flex; gap: 0.25rem;">
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 100%; height: 100%; background: white; border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 100%; height: 100%; background: white; border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 100%; height: 100%; background: white; border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 0%; height: 100%; background: rgba(255,255,255,0.5); border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 0%; height: 100%; background: rgba(255,255,255,0.5); border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 0%; height: 100%; background: rgba(255,255,255,0.5); border-radius: 3px;"></div>
                    </div>
                    <div style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; overflow: hidden;">
                        <div style="width: 0%; height: 100%; background: rgba(255,255,255,0.5); border-radius: 3px;"></div>
                    </div>
                </div>
                <div style="margin-top: 0.5rem; font-size: 0.625rem; opacity: 0.8; text-align: center;">
                    å†ç·´ç¿’ 4 å¤©è§£é–ã€Œé€±å† è»ã€å¾½ç« ï¼
                </div>
            </div>

            <!-- Achievement Badges -->
            <div class="profile-card" style="margin: 1rem 1.5rem;">
                <h4 style="margin: 0 0 1rem; font-size: 1rem; font-weight: 600; color: var(--text-primary);">ğŸ† æˆå°±å¾½ç« </h4>
                <div style="display: flex; gap: 0.75rem; overflow-x: auto; padding-bottom: 0.5rem;">
                    <!-- Badge 1: First Step -->
                    <div class="achievement-badge" style="min-width: 4rem; text-align: center; cursor: pointer;" title="å®Œæˆç¬¬ä¸€å€‹ä¸»é¡Œï¼">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #fbbf24, #f59e0b); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);">ğŸŒŸ</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">ç¬¬ä¸€æ­¥</div>
                    </div>
                    
                    <!-- Badge 2: Consistent -->
                    <div class="achievement-badge" style="min-width: 4rem; text-align: center; cursor: pointer;" title="é€£çºŒç·´ç¿’ 3 å¤©ï¼">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: linear-gradient(135deg, #22c55e, #16a34a); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 2px 8px rgba(34, 197, 94, 0.4);">ğŸ”¥</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">é€£çºŒ</div>
                    </div>
                    
                    <!-- Badge 3: Speed -->
                    <div class="achievement-badge locked" style="min-width: 4rem; text-align: center; opacity: 0.5;" title="å®Œæˆä¸€å€‹ä¸»é¡Œå°‘æ–¼ 10 åˆ†é˜">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: var(--background-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">âš¡</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">ç¥é€Ÿ</div>
                    </div>
                    
                    <!-- Badge 4: Perfect -->
                    <div class="achievement-badge locked" style="min-width: 4rem; text-align: center; opacity: 0.5;" title="ç²å¾—å®¶é•· 5 æ˜Ÿè©•åƒ¹">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: var(--background-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ’¯</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">å®Œç¾</div>
                    </div>
                    
                    <!-- Badge 5: Explorer -->
                    <div class="achievement-badge locked" style="min-width: 4rem; text-align: center; opacity: 0.5;" title="å˜—è©¦æ‰€æœ‰ä¸»é¡Œ">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: var(--background-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ—ºï¸</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">æ¢ç´¢</div>
                    </div>
                    
                    <!-- Badge 6: Master -->
                    <div class="achievement-badge locked" style="min-width: 4rem; text-align: center; opacity: 0.5;" title="å®Œæˆæ‰€æœ‰ä¸»é¡Œï¼">
                        <div style="width: 3rem; height: 3rem; margin: 0 auto 0.5rem; background: var(--background-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">ğŸ‘‘</div>
                        <div style="font-size: 0.625rem; color: var(--text-secondary);">å¤§å¸«</div>
                    </div>
                </div>
                <div style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--border-color); text-align: center;">
                    <span style="font-size: 0.75rem; color: var(--text-secondary);">1/6 å¾½ç« å·²è§£é–</span>
                </div>
            </div>

            <!-- Search Topics -->
            <div style="padding: 1rem 1.5rem 0;">
                <div class="search-box" style="position: relative;">
                    <span class="material-symbols-outlined" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);">search</span>
                    <input type="text" id="topic-search" placeholder="æœå°‹é¢è©¦ä¸»é¡Œ..." 
                           style="width: 100%; padding: 0.75rem 1rem 0.75rem 2.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-lg); font-size: 0.9375rem; outline: none; transition: border-color 0.2s;"
                           onkeyup="filterTopics()">
                </div>
            </div>

            <!-- Topics Section -->
            <div class="section">
                <div class="section-header">
                    <h3 class="section-title">é¢è©¦ä¸»é¡Œ</h3>
                    <span class="view-all">æŸ¥çœ‹å…¨éƒ¨</span>
                </div>
                <div class="topics-list">
                    <!-- Completed -->
                    <div class="topic-card completed" onclick="window.location.href='{{ url_for('lesson', topic_id='self-introduction') }}'">
                        <div class="topic-icon-wrapper">
                            <span class="material-symbols-outlined" style="color: #22c55e;">check_circle</span>
                        </div>
                        <div class="topic-content">
                            <div class="topic-icon-small">
                                <span class="material-symbols-outlined">face</span>
                            </div>
                            <div class="topic-info">
                                <h4 class="topic-title">è‡ªæˆ‘ä»‹ç´¹</h4>
                                <p class="topic-description">å·²ç¶“æŒæ¡ï¼è¡¨ç¾è‡ªä¿¡ï¼Œçœ¼ç¥æ¥è§¸è‰¯å¥½ï¼</p>
                                <div class="topic-status">
                                    <span class="material-symbols-outlined" style="font-size: 0.875rem;">done_all</span>
                                    å·²å®Œæˆ
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- In Progress -->
                    <div class="topic-card in-progress" onclick="window.location.href='{{ url_for('lesson', topic_id='interests') }}'">
                        <div class="topic-content">
                            <div class="topic-icon-small">
                                <span class="material-symbols-outlined">sports_esports</span>
                            </div>
                            <div class="topic-info">
                                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                    <h4 class="topic-title">èˆˆè¶£æ„›å¥½</h4>
                                    <span style="padding: 0.25rem 0.5rem; background: var(--primary-50); color: var(--primary); border-radius: 0.25rem; font-size: 0.625rem; font-weight: 700; text-transform: uppercase;">ç•¶å‰</span>
                                </div>
                                <p class="topic-description">ç·´ç¿’ï¼šè«‡è«–å–œæ„›çš„ç©å…·å’Œæ´»å‹•ã€‚</p>
                                <div class="topic-progress">
                                    <div class="progress-dots">
                                        <div class="progress-dot completed">1</div>
                                        <div class="progress-dot active">2</div>
                                        <div class="progress-dot">3</div>
                                    </div>
                                    <button class="continue-btn">
                                        ç¹¼çºŒ
                                        <span class="material-symbols-outlined" style="font-size: 1rem;">arrow_forward</span>
                                    </button>
                                </div>
                                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                                    <span class="material-symbols-outlined" style="font-size: 0.875rem; vertical-align: middle;">schedule</span>
                                    é è¨ˆå®Œæˆï¼š15 åˆ†é˜
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Not Started -->
                    <div class="topic-card" onclick="window.location.href='{{ url_for('lesson', topic_id='family') }}'">
                        <div class="topic-content">
                            <div class="topic-icon-small">
                                <span class="material-symbols-outlined">diversity_3</span>
                            </div>
                            <div class="topic-info">
                                <h4 class="topic-title">å®¶åº­ä»‹ç´¹</h4>
                                <p class="topic-description">ä¸‹ä¸€æ­¥ï¼šä»‹ç´¹å®¶åº­æˆå“¡ã€‚</p>
                                <div class="topic-status" style="background: var(--background-light); color: var(--text-secondary);">
                                    æœªé–‹å§‹
                                </div>
                                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                                    <span class="material-symbols-outlined" style="font-size: 0.875rem; vertical-align: middle;">schedule</span>
                                    é è¨ˆå®Œæˆï¼š20 åˆ†é˜
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Locked -->
                    <div class="topic-card locked">
                        <div class="topic-content" style="opacity: 0.5;">
                            <div class="topic-icon-small">
                                <span class="material-symbols-outlined">psychology</span>
                            </div>
                            <div class="topic-info">
                                <h4 class="topic-title">è§€å¯ŸåŠ›è¨“ç·´</h4>
                                <p class="topic-description">è§£é–é€²éšé‚è¼¯å•é¡Œã€‚</p>
                            </div>
                        </div>
                        <div class="locked-overlay">
                            <div class="locked-badge">
                                <span class="material-symbols-outlined">lock</span>
                                Premium
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Tip Section -->
            <div class="tip-section">
                <div class="tip-card">
                    <span class="material-symbols-outlined">lightbulb</span>
                    <div class="tip-content">
                        <p class="tip-label">ä»Šæ—¥å°è²¼å£«</p>
                        <p class="tip-text">é¼“å‹µå°æ˜å›ç­”å•é¡Œæ™‚ä¿æŒçœ¼ç¥æ¥è§¸ï¼Œé€™èƒ½å‘é¢è©¦å®˜å±•ç¾è‡ªä¿¡ã€‚</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" onclick="window.location.href='/'">
                <span class="material-symbols-outlined filled">dashboard</span>
                <span>é¦–é </span>
            </div>
            <div class="nav-item" onclick="window.location.href='{{ url_for('lesson', topic_id='self-introduction') }}'">
                <span class="material-symbols-outlined">school</span>
                <span>ç·´ç¿’</span>
            </div>
            <div class="nav-center">
                <button class="nav-center-btn" onclick="window.location.href='{{ url_for('parent_notes') }}'">
                    <span class="material-symbols-outlined">note_add</span>
                </button>
            </div>
            <div class="nav-item" onclick="window.location.href='{{ url_for('unlock_full_access') }}'">
                <span class="material-symbols-outlined">bar_chart</span>
                <span>å ±å‘Š</span>
            </div>
            <a href="{{ url_for('profile_edit') }}" class="nav-item">
                <span class="material-symbols-outlined">person</span>
                <span>æª”æ¡ˆ</span>
            </a>
        </nav>
    </div>

    <script>
    // Achievement Badges Functionality
    const achievementData = {
        'ç¬¬ä¸€æ­¥': {
            icon: 'ğŸŒŸ',
            title: 'ç¬¬ä¸€æ­¥',
            description: 'å®Œæˆç¬¬ä¸€å€‹é¢è©¦ä¸»é¡Œï¼',
            unlocked: true,
            date: '2026-02-08'
        },
        'é€£çºŒ': {
            icon: 'ğŸ”¥',
            title: 'é€£çºŒç·´ç¿’',
            description: 'é€£çºŒç·´ç¿’ 3 å¤©ï¼',
            unlocked: true,
            date: '2026-02-10'
        },
        'ç¥é€Ÿ': {
            icon: 'âš¡',
            title: 'ç¥é€Ÿå®Œæˆ',
            description: 'å®Œæˆä¸€å€‹ä¸»é¡Œå°‘æ–¼ 10 åˆ†é˜',
            unlocked: false,
            requirement: 'å®Œæˆä»»ä½•ä¸»é¡Œçš„ç·´ç¿’æ™‚é–“å°‘æ–¼ 10 åˆ†é˜'
        },
        'å®Œç¾': {
            icon: 'ğŸ’¯',
            title: 'å®Œç¾è©•åƒ¹',
            description: 'ç²å¾—å®¶é•· 5 æ˜Ÿè©•åƒ¹',
            unlocked: false,
            requirement: 'åœ¨ç·´ç¿’å¾Œçµ¦äºˆ 5 æ˜Ÿè©•åƒ¹'
        },
        'æ¢ç´¢': {
            icon: 'ğŸ—ºï¸',
            title: 'å‹‡æ•¢æ¢ç´¢',
            description: 'å˜—è©¦è‡³å°‘ 5 å€‹ä¸åŒä¸»é¡Œ',
            unlocked: false,
            requirement: 'å®Œæˆ 5 å€‹ä¸åŒçš„é¢è©¦ä¸»é¡Œ'
        },
        'å¤§å¸«': {
            icon: 'ğŸ‘‘',
            title: 'é¢è©¦å¤§å¸«',
            description: 'å®Œæˆæ‰€æœ‰ 9 å€‹é¢è©¦ä¸»é¡Œï¼',
            unlocked: false,
            requirement: 'å®Œæˆå…¨éƒ¨é¢è©¦ä¸»é¡Œ'
        }
    };

    function showAchievementDetail(badgeName) {
        const badge = achievementData[badgeName];
        if (!badge) return;
        
        if (badge.unlocked) {
            alert(`${badge.icon} ${badge.title}\n\n${badge.description}\n\nè§£é–æ—¥æœŸ: ${badge.date || 'æœªçŸ¥'}`);
        } else {
            alert(`${badge.icon} ${badge.title} (é–å®š)\n\n${badge.description}\n\nè§£é–æ¢ä»¶: ${badge.requirement}`);
        }
    }

    // Add click handlers to badges
    document.addEventListener('DOMContentLoaded', function() {
        const badges = document.querySelectorAll('.achievement-badge');
        badges.forEach(badge => {
            const nameEl = badge.querySelector('div:last-child');
            if (nameEl && nameEl.textContent) {
                const badgeName = nameEl.textContent.trim();
                badge.onclick = function() { showAchievementDetail(badgeName); };
            }
        });
    });

    // Topic Search Functionality
    function filterTopics() {
        const searchInput = document.getElementById('topic-search');
        const searchTerm = searchInput.value.toLowerCase().trim();
        const topicsList = document.querySelector('.topics-list');
        const topicCards = document.querySelectorAll('.topic-card');
        
        if (!topicsList) return;
        
        topicCards.forEach(card => {
            const title = card.querySelector('.topic-title');
            const description = card.querySelector('.topic-description');
            
            if (!title) return;
            
            const titleText = title.textContent.toLowerCase();
            const descText = description ? description.textContent.toLowerCase() : '';
            
            if (searchTerm === '' || titleText.includes(searchTerm) || descText.includes(searchTerm)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
        
        // Show/hide "no results" message
        const visibleCards = document.querySelectorAll('.topic-card[style=""]');
        if (searchTerm !== '' && visibleCards.length === 0) {
            // Could add "no results" message here
        }
    }
    </script>
</body>
</html>
